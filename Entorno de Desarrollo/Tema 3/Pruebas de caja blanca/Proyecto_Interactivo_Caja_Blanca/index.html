<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio de Pruebas de Caja Blanca</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@300;400;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>Laboratorio de Caja Blanca</h1>
            <p>Analiza el código, cubre caminos y domina la lógica interna.</p>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" onclick="openTab(event, 'wb1')">1. Cobertura Sentencias</button>
            <button class="tab-btn" onclick="openTab(event, 'wb2')">2. Cobertura Ramas</button>
            <button class="tab-btn" onclick="openTab(event, 'wb3')">3. Complejidad Ciclomática</button>
            <button class="tab-btn" onclick="openTab(event, 'wb4')">4. Caminos (Path)</button>
            <button class="tab-btn" onclick="openTab(event, 'wb5')">5. Bucles</button>
        </nav>

        <main>
            <!-- Actividad 1: Cobertura de Sentencias -->
            <section id="wb1" class="tab-content active">
                <div class="card">
                    <h2>Actividad 1: Cobertura de Sentencias</h2>
                    <p class="desc">Mueve el deslizador para simular diferentes valores de entrada y observa qué líneas
                        de código se ejecutan en tiempo real.</p>

                    <div class="code-block">
                        <pre>
<span id="l1" class="line">1  function check(x) {</span>
<span id="l2" class="line">2      if (x > 100) {</span>
<span id="l3" class="line critical">3          console.log("¡Crítico!");</span>
<span id="l4" class="line">4      }</span>
<span id="l5" class="line">5      return true;</span>
<span id="l6" class="line">6  }</span>
</pre>
                    </div>

                    <div class="control-group">
                        <label>Valor de x: <span id="stmtDisplay"
                                style="font-weight:bold; color:var(--accent);">50</span></label>
                        <input type="range" id="stmtSlider" min="0" max="200" value="50" oninput="runStatement()">
                    </div>
                    <div id="stmtResult" class="result-box info">Ajusta el valor para cubrir todas las sentencias.</div>
                </div>
            </section>

            <!-- Actividad 2: Cobertura de Ramas -->
            <section id="wb2" class="tab-content">
                <div class="card">
                    <h2>Actividad 2: Cobertura de Ramas (Decision Coverage)</h2>
                    <p class="desc">Debes probar AMBOS caminos del <code>if</code> (Verdadero y Falso). Usa el
                        deslizador para cambiar la edad.</p>

                    <div class="code-block">
                        <pre>
if (edad >= 18) {
    status = "Mayor";
} else {
    status = "Menor";
}
</pre>
                    </div>

                    <div class="control-group">
                        <label>Edad: <span id="branchDisplay"
                                style="font-weight:bold; color:var(--accent);">10</span></label>
                        <input type="range" id="branchSlider" min="0" max="100" value="10" oninput="runBranch()">
                    </div>

                    <div class="progress-container">
                        <div class="branch-indicator" id="branchTrue">Rama TRUE (>=18)</div>
                        <div class="branch-indicator" id="branchFalse">Rama FALSE (<18)< /div>
                        </div>
                        <div id="branchResult" class="result-box">Cobertura Actual: 0%</div>
                    </div>
            </section>

            <!-- Actividad 3: Complejidad Ciclomática -->
            <section id="wb3" class="tab-content">
                <div class="card">
                    <h2>Actividad 3: Calculadora de Complejidad</h2>
                    <p class="desc">Calcula la Complejidad Ciclomática V(G) del siguiente código.<br>
                        <em>Fórmula: Número de regiones cerradas + 1 (o Nodos Predicado + 1)</em>
                    </p>

                    <div class="code-block">
                        <pre>
function process(a, b) {
    if (a > 0) {          // Nodo Predicado 1
        while (b < 5) {   // Nodo Predicado 2
            b++;
        }
    } else {
        if (b == 0) {     // Nodo Predicado 3
            return -1;
        }
    }
    return 0;
}
</pre>
                    </div>

                    <div class="quiz-options">
                        <button class="quiz-btn" onclick="checkComplexity(2)">2</button>
                        <button class="quiz-btn" onclick="checkComplexity(3)">3</button>
                        <button class="quiz-btn" onclick="checkComplexity(4)">4</button>
                        <button class="quiz-btn" onclick="checkComplexity(5)">5</button>
                    </div>
                    <div id="complexResult" class="result-box info">Selecciona tu respuesta.</div>
                </div>
            </section>

            <!-- Actividad 4: Cobertura de Caminos -->
            <section id="wb4" class="tab-content">
                <div class="card">
                    <h2>Actividad 4: Cobertura de Caminos (Path Coverage)</h2>
                    <p class="desc">Encuentra los 4 caminos posibles combinando las condiciones A y B.</p>

                    <div style="display:flex; justify-content:space-around; align-items:center; margin-bottom:20px;">
                        <div class="code-block" style="flex:1; margin-right:20px;">
                            <pre>
if (A) { ... }
if (B) { ... }
</pre>
                        </div>
                        <div style="flex:1; text-align:center;">
                            <!-- Simple Flow Graph Visualization -->
                            <div style="display:flex; flex-direction:column; align-items:center; gap:10px;">
                                <div style="padding:10px; border:2px solid #555; border-radius:50%;">Start</div>
                                <div style="font-size:20px;">↓</div>
                                <div id="node-A"
                                    style="padding:10px; border:2px solid #555; border-radius:5px; width:100px;">IF A
                                </div>
                                <div style="font-size:20px;">↓</div>
                                <div id="node-B"
                                    style="padding:10px; border:2px solid #555; border-radius:5px; width:100px;">IF B
                                </div>
                                <div style="font-size:20px;">↓</div>
                                <div style="padding:10px; border:2px solid #555; border-radius:50%;">End</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group" style="display:flex; gap:20px; justify-content:center;">
                        <label class="toggle" style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                            <input type="checkbox" id="pathA" onchange="runPath()">
                            <span>Condición A (True/False)</span>
                        </label>
                        <label class="toggle" style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                            <input type="checkbox" id="pathB" onchange="runPath()">
                            <span>Condición B (True/False)</span>
                        </label>
                    </div>

                    <div class="badges-container">
                        <span class="badge" id="p-tt">T-T</span>
                        <span class="badge" id="p-tf">T-F</span>
                        <span class="badge" id="p-ft">F-T</span>
                        <span class="badge" id="p-ff">F-F</span>
                    </div>
                    <div id="pathResult" class="result-box">Caminos descubiertos: 0/4</div>
                </div>
            </section>

            <!-- Actividad 5: Bucles -->
            <section id="wb5" class="tab-content">
                <div class="card">
                    <h2>Actividad 5: Prueba de Bucles</h2>
                    <p class="desc">Prueba los escenarios del bucle: 0 veces, 1 vez, varias veces.</p>

                    <div class="code-block">
                        <pre>
while (contador < limite) {
    contador++;
}
// Inicialmente contador = 0
</pre>
                    </div>

                    <div class="control-group">
                        <label>Límite: <span id="loopDisplay"
                                style="font-weight:bold; color:var(--accent);">0</span></label>
                        <input type="range" id="loopSlider" min="-1" max="10" value="0" oninput="runLoop()">
                    </div>

                    <div class="loop-scenarios">
                        <div class="scenario" id="l-zero">0 iteraciones (Skip)</div>
                        <div class="scenario" id="l-one">1 iteración (Single)</div>
                        <div class="scenario" id="l-many">N iteraciones (Loop)</div>
                    </div>
                    <div id="loopResult" class="result-box info">Ajusta el límite para probar los casos.</div>
                </div>
            </section>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>