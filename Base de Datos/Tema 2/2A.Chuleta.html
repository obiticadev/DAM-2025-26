<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuleta Visual y Definitiva del Modelo E/R (Modo Oscuro)</title>
    <style>
        :root {
            --bg-main: #1e1e1e;
            --bg-container: #2d2d2d;
            --bg-table-header: #383838;
            --bg-table-even: #333333;
            --bg-table-hover: #4a4a4a;
            --text-main: #dcdcdc;
            --color-primary: #58a6ff;
            --color-secondary: #c678dd;
            --color-accent: #e5c07b;
            --border-color: #444;
            --rule-border: #5e81ac;
            --rule-bg: rgba(94, 129, 172, 0.1);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: var(--bg-container);
            padding: 30px 40px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        h1, h3 { text-align: center; border: none; padding: 0; }
        h1 { color: var(--color-primary); margin-bottom: 20px; }
        h3 { color: var(--color-secondary); margin: 50px 0 20px 0; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background-color: var(--bg-table-header); }
        tr:nth-child(even) { background-color: var(--bg-table-even); }
        tr:hover { background-color: var(--bg-table-hover); }
        strong { color: var(--color-accent); }
        .code-example { font-family: "Fira Code", monospace; background-color: #212121; padding: 4px 8px; border-radius: 4px; border: 1px solid #555; }
        .rule { background-color: var(--rule-bg); border: 1px solid var(--rule-border); border-left: 5px solid var(--rule-border); padding: 15px; margin-top: 20px; border-radius: 5px; }
        
        /* Estilos para las secciones de diagramas */
        .explanation-section { margin-top: 30px; display: grid; grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr); gap: 40px; align-items: center; }
        .explanation-text h4 { color: var(--color-accent); margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 5px;}
        .explanation-text p { margin-bottom: 5px; }
        .explanation-text .usage-case { font-style: italic; color: #a0a0a0; font-size: 0.9em; }
        .diagram-container { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.5); max-width: 450px; margin: auto; }
        
        /* Estilos SVG */
        .er-diagram { width: 100%; height: auto; }
        .er-diagram .entity, .er-diagram .relationship { stroke: #000; stroke-width: 1.8; fill: #fff; }
        .er-diagram .entity-double { stroke-width: 1.5; }
        .er-diagram .line { stroke: #000; stroke-width: 1.8; }
        .er-diagram .dashed-line { stroke: #000; stroke-width: 1.8; stroke-dasharray: 6, 3; }
        .er-diagram text { font-family: 'Helvetica', sans-serif; font-size: 16px; fill: #000; text-anchor: middle; dominant-baseline: central; }
        .er-diagram .text-blue { fill: #007bff; }
        .er-diagram .restriction-arc { fill: none; stroke: #000; stroke-width: 1.8; }
        .er-diagram .arrow-head { fill: #000; }
    </style>
</head>
<body>
<div class="container">
    <h1>Chuleta Visual y Definitiva del Modelo E/R</h1>

    <h3>PASO 1: Identificar los Bloques Básicos</h3>
    <table>
        <thead><tr><th>Si en el problema veo...</th><th>Me pregunto...</th><th>...lo dibujo así (en texto):</th></tr></thead>
        <tbody>
            <tr><td><strong>Sustantivos principales</strong> (cliente, factura)</td><td>¿Es un "algo" principal del que quiero guardar info?</td><td>Caja: <span class="code-example">[CLIENTE]</span></td></tr>
            <tr><td><strong>Una característica o dato simple</strong> (nombre)</td><td>¿Es solo un dato que describe a la entidad?</td><td>Atributo dentro: <span class="code-example">[CLIENTE(nombre)]</span></td></tr>
            <tr><td><strong>Un identificador único</strong> (DNI, código)</td><td>¿Identifica a cada instancia de forma única?</td><td>Atributo <u>subrayado</u> (PK): <span class="code-example">[CLIENTE(<u>DNI</u>, nombre)]</span></td></tr>
        </tbody>
    </table>

    <h3>PASO 2: Conectar los Bloques</h3>
    <table>
       <thead><tr><th>Si en el problema veo...</th><th>Me pregunto...</th><th>...lo dibujo así (en texto):</th></tr></thead>
        <tbody>
            <tr><td><strong>Un verbo que une a dos sustantivos</strong> (realiza)</td><td>¿Es una acción que conecta dos de mis cajas?</td><td>Rombo con el verbo: <span class="code-example">[CLIENTE]──(realiza)──[PEDIDO]</span></td></tr>
            <tr><td><strong>La cantidad de elementos</strong> (varios, un solo)</td><td>1. Cojo <strong>UN</strong> elemento de A: ¿con cuántos de B se relaciona?<br>2. Repito a la inversa.</td><td>Cardinalidad `(min, max)` en el <strong>extremo opuesto</strong>:<br><span class="code-example">[CLIENTE] (1,1)──(realiza)──(1,N) [PEDIDO]</span></td></tr>
        </tbody>
    </table>

    <h3>PASO 3: Casos Avanzados y Diagramas Visuales</h3>
    
    <div class="explanation-section">
        <div class="explanation-text"><h4>Entidad Débil: Dependencia en Existencia (E)</h4><p>La entidad débil (<code>FAMILIAR</code>) necesita a la fuerte (<code>PACIENTE</code>) para existir, pero se identifica por sí misma.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Para información secundaria que solo tiene sentido si el elemento principal existe. Ej: Los contactos de emergencia de un empleado.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 300 380" class="er-diagram"><rect x="50" y="20" width="200" height="50" class="entity"/><text x="150" y="45">PACIENTE</text><polygon points="150,140 215,200 150,260 85,200" class="relationship"/><text x="150" y="190" class="text-blue">E</text><text x="150" y="220" class="text-blue">tiene</text><rect x="50" y="310" width="200" height="50" class="entity"/><rect x="54" y="314" width="192" height="42" class="entity entity-double"/><text x="150" y="335">FAMILIAR</text><line x1="150" y1="70" x2="150" y2="140" class="line"/><line x1="150" y1="260" x2="150" y2="310" class="line"/></svg></div>
        <div class="explanation-text"><h4>Entidad Débil: Dependencia en Identificación (ID)</h4><p>La entidad débil (<code>EJEMPLAR</code>) necesita la clave de la fuerte (<code>LIBRO</code>) para poder ser identificada.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Cuando el identificador de algo solo tiene sentido dentro de un contexto mayor. Ej: El "número de pista 3" de un CD.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 300 380" class="er-diagram"><rect x="50" y="20" width="200" height="50" class="entity"/><text x="150" y="45">LIBRO</text><polygon points="150,140 215,200 150,260 85,200" class="relationship"/><text x="150" y="190" class="text-blue">ID</text><text x="150" y="220" class="text-blue">tiene</text><rect x="50" y="310" width="200" height="50" class="entity"/><rect x="54" y="314" width="192" height="42" class="entity entity-double"/><text x="150" y="335">EJEMPLAR</text><line x1="150" y1="70" x2="150" y2="140" class="line"/><line x1="150" y1="260" x2="150" y2="310" class="line"/></svg></div>
        <div class="explanation-text"><h4>Restricción de Exclusividad (XOR)</h4><p>Un <code>MÚSICO</code> puede <code>tocar</code> O <code>dirigir</code>, pero no ambas. El arco indica una elección obligatoria entre una de las dos relaciones.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Para modelar roles o estados que son mutuamente excluyentes para una entidad.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 400 350" class="er-diagram"><rect x="100" y="10" width="200" height="50" class="entity"/><text x="200" y="35">MÚSICO</text><polygon points="125,140 175,190 125,240 75,190" class="relationship"/><text x="125" y="190" class="text-blue">toca</text><text x="50" y="140" class="text-blue">1:N</text><polygon points="275,140 325,190 275,240 225,190" class="relationship"/><text x="275" y="190" class="text-blue">dirige</text><text x="350" y="140" class="text-blue">1:N</text><rect x="100" y="290" width="200" height="50" class="entity"/><text x="200" y="315">ORQUESTA</text><line x1="200" y1="60" x2="125" y2="140" class="line"/><line x1="200" y1="60" x2="275" y2="140" class="line"/><line x1="125" y1="240" x2="200" y2="290" class="line"/><line x1="275" y1="240" x2="200" y2="290" class="line"/><path d="M 160 115 A 60 60 0 0 1 240 115" class="restriction-arc"/></svg></div>
        <div class="explanation-text"><h4>Restricción de Exclusión</h4><p>Impide que un <code>MONITOR</code> imparta un curso y lo reciba al mismo tiempo. La línea discontinua conecta relaciones que no pueden ocurrir a la vez para la misma pareja de entidades.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Para acciones opuestas o que no pueden ser recíprocas simultáneamente. Ej: Un usuario no puede 'seguir' y 'bloquear' a otro a la vez.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 400 350" class="er-diagram"><rect x="100" y="10" width="200" height="50" class="entity"/><text x="200" y="35">MONITOR</text><polygon points="125,140 175,190 125,240 75,190" class="relationship"/><text x="125" y="190" class="text-blue">imparte</text><text x="50" y="140" class="text-blue">1..N</text><polygon points="275,140 325,190 275,240 225,190" class="relationship"/><text x="275" y="190" class="text-blue">recibe</text><text x="350" y="140" class="text-blue">1..N</text><rect x="100" y="290" width="200" height="50" class="entity"/><text x="200" y="315">CURSO</text><line x1="200" y1="60" x2="125" y2="140" class="line"/><line x1="200" y1="60" x2="275" y2="140" class="line"/><line x1="125" y1="240" x2="200" y2="290" class="line"/><line x1="275" y1="240" x2="200" y2="290" class="line"/><line x1="175" y1="190" x2="225" y2="190" class="dashed-line"/><text x="200" y="215" class="text-blue" font-size="14">(exclusión)</text></svg></div>
        <div class="explanation-text"><h4>Restricción de Inclusividad (Prerrequisito)</h4><p>Un <code>MONITOR</code> debe <code>recibir</code> 2 o más cursos antes de poder <code>impartir</code>. El arco con flecha apunta a la relación que es un prerrequisito.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Para establecer una secuencia o condición. Ej: Un cliente debe tener status 'VIP' para poder acceder a 'ofertas exclusivas'.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 400 350" class="er-diagram"><defs><marker id="arrow1" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" class="arrow-head"/></marker></defs><rect x="100" y="10" width="200" height="50" class="entity"/><text x="200" y="35">MONITOR</text><polygon points="125,140 175,190 125,240 75,190" class="relationship"/><text x="125" y="190" class="text-blue">imparte</text><text x="50" y="140" class="text-blue">1..N</text><polygon points="275,140 325,190 275,240 225,190" class="relationship"/><text x="275" y="190" class="text-blue">recibe</text><rect x="100" y="290" width="200" height="50" class="entity"/><text x="200" y="315">CURSO</text><line x1="200" y1="60" x2="125" y2="140" class="line"/><line x1="200" y1="60" x2="275" y2="140" class="line"/><line x1="125" y1="240" x2="200" y2="290" class="line"/><line x1="275" y1="240" x2="200" y2="290" class="line"/><path d="M 165 125 A 70 70 0 0 1 235 125" class="restriction-arc" marker-end="url(#arrow1)"/><text x="200" y="115" class="text-blue" font-size="14">(2,n)</text></svg></div>
        <div class="explanation-text"><h4>Restricción de Inclusión Fuerte</h4><p>Un <code>MONITOR</code> solo puede <code>impartir</code> un curso específico si ha <code>recibido</code> <strong>ese mismo curso</strong>. La flecha discontinua indica este requisito estricto.</p><p class="usage-case"><strong>Cuándo se usa:</strong> Para prerrequisitos que se aplican a la misma instancia. Ej: Para editar un documento, debes ser el autor original del mismo.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 400 350" class="er-diagram"><defs><marker id="arrow2" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" class="arrow-head"/></marker></defs><rect x="100" y="10" width="200" height="50" class="entity"/><text x="200" y="35">MONITOR</text><polygon points="125,140 175,190 125,240 75,190" class="relationship"/><text x="125" y="190" class="text-blue">imparte</text><text x="50" y="140" class="text-blue">1..N</text><polygon points="275,140 325,190 275,240 225,190" class="relationship"/><text x="275" y="190" class="text-blue">recibe</text><rect x="100" y="290" width="200" height="50" class="entity"/><text x="200" y="315">CURSO</text><line x1="200" y1="60" x2="125" y2="140" class="line"/><line x1="200" y1="60" x2="275" y2="140" class="line"/><line x1="125" y1="240" x2="200" y2="290" class="line"/><line x1="275" y1="240" x2="200" y2="290" class="line"/><line x1="175" y1="190" x2="225" y2="190" class="dashed-line" marker-end="url(#arrow2)"/><text x="200" y="215" class="text-blue" font-size="14">(inclusión)</text></svg></div>
    </div>
    
    <h3>Generalización y Especialización (Jerarquías IS-A)</h3>
    <div class="rule"><strong>Idea Central:</strong> Se usa cuando tienes entidades que son un "tipo de" otra más general. Piensa en la herencia en programación. Un <code>COCHE</code> "es un" <code>VEHÍCULO</code>.</div>
    <div class="explanation-section">
        <div class="explanation-text"><h4>Total y Exclusiva</h4><p>Una <code>PERSONA</code> <strong>debe</strong> ser clasificada (total, círculo) y solo puede ser <code>HOMBRE</code> o <code>MUJER</code>, no ambos (exclusiva, arco en 'U').</p><p class="usage-case"><strong>Cuándo se usa:</strong> Cuando una entidad debe pertenecer a una y solo una de las categorías disponibles.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 350 380" class="er-diagram"><rect x="25" y="10" width="300" height="50" class="entity"/><text x="175" y="35">PERSONA</text><text x="175" y="70" font-size="13">(1,1)</text><polygon points="150,110 200,110 175,150" class="relationship"/><circle cx="175" cy="95" r="7" class="entity"/><line x1="175" y1="78" x2="175" y2="90" class="line"/><line x1="175" y1="100" x2="175" y2="110" class="line"/><rect x="0" y="280" width="150" height="50" class="entity"/><text x="75" y="305">HOMBRE</text><text x="75" y="255" font-size="13">(0,1)</text><rect x="200" y="280" width="150" height="50" class="entity"/><text x="275" y="305">MUJER</text><text x="275" y="255" font-size="13">(0,1)</text><line x1="75" y1="280" x2="175" y2="150" class="line"/><line x1="275" y1="280" x2="175" y2="150" class="line"/><path d="M 100 230 A 80 40 0 0 0 250 230" class="restriction-arc"/></svg></div>
        <div class="explanation-text"><h4>Parcial y Exclusiva</h4><p>Un <code>VEHÍCULO</code> <strong>puede</strong> no estar en las subclases (parcial, sin círculo), pero si lo está, solo puede ser <code>COCHE</code> o <code>CAMIÓN</code> (exclusiva, arco en 'U').</p><p class="usage-case"><strong>Cuándo se usa:</strong> Cuando tienes categorías específicas, pero un elemento podría no pertenecer a ninguna de ellas (ej. una "moto").</p></div>
        <div class="diagram-container"><svg viewBox="0 0 350 380" class="er-diagram"><rect x="25" y="10" width="300" height="50" class="entity"/><text x="175" y="35">VEHÍCULO</text><text x="175" y="70" font-size="13">(1,1)</text><polygon points="150,110 200,110 175,150" class="relationship"/><line x1="175" y1="78" x2="175" y2="110" class="line"/><rect x="0" y="280" width="150" height="50" class="entity"/><text x="75" y="305">COCHE</text><text x="75" y="255" font-size="13">(0,1)</text><rect x="200" y="280" width="150" height="50" class="entity"/><text x="275" y="305">CAMIÓN</text><text x="275" y="255" font-size="13">(0,1)</text><line x1="75" y1="280" x2="175" y2="150" class="line"/><line x1="275" y1="280" x2="175" y2="150" class="line"/><path d="M 100 230 A 80 40 0 0 0 250 230" class="restriction-arc"/></svg></div>
        <div class="explanation-text"><h4>Total y Solapada</h4><p>Una <code>INFECCIÓN</code> <strong>debe</strong> ser de algún tipo (total, círculo), y puede ser <code>VÍRICA</code> y <code>BACTERIANA</code> a la vez (solapada, letra 'o').</p><p class="usage-case"><strong>Cuándo se usa:</strong> Cuando una entidad debe tener al menos una etiqueta, y puede tener varias simultáneamente.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 350 380" class="er-diagram"><rect x="25" y="10" width="300" height="50" class="entity"/><text x="175" y="35">INFECCIÓN</text><text x="175" y="70" font-size="13">(1,1)</text><polygon points="150,110 200,110 175,150" class="relationship"/><text x="205" y="130" font-size="14">o</text><circle cx="175" cy="95" r="7" class="entity"/><line x1="175" y1="78" x2="175" y2="90" class="line"/><line x1="175" y1="100" x2="175" y2="110" class="line"/><rect x="0" y="280" width="150" height="50" class="entity"/><text x="75" y="305">VÍRICA</text><rect x="200" y="280" width="150" height="50" class="entity"/><text x="275" y="305">BACTERIANA</text><line x1="75" y1="280" x2="175" y2="150" class="line"/><line x1="275" y1="280" x2="175" y2="150" class="line"/></svg></div>
        <div class="explanation-text"><h4>Parcial y Solapada</h4><p>Un <code>PARTICIPANTE</code> <strong>puede</strong> no ser ni <code>PARADO</code> ni <code>AFILIADO</code> (parcial, sin círculo), y podría ser ambos a la vez (solapada, letra 'o').</p><p class="usage-case"><strong>Cuándo se usa:</strong> Es la restricción más flexible. Un elemento puede tener ninguna, una, o múltiples categorías. Ej: los géneros de una película.</p></div>
        <div class="diagram-container"><svg viewBox="0 0 350 380" class="er-diagram"><rect x="25" y="10" width="300" height="50" class="entity"/><text x="175" y="35">PARTICIPANTE</text><text x="175" y="70" font-size="13">(1,1)</text><polygon points="150,110 200,110 175,150" class="relationship"/><text x="205" y="130" font-size="14">o</text><line x1="175" y1="78" x2="175" y2="110" class="line"/><rect x="0" y="280" width="150" height="50" class="entity"/><text x="75" y="305">PARADO</text><rect x="200" y="280" width="150" height="50" class="entity"/><text x="275" y="305">AFILIADO</text><line x1="75" y1="280" x2="175" y2="150" class="line"/><line x1="275" y1="280" x2="175" y2="150" class="line"/></svg></div>
    </div>
</div>
</body>
</html>